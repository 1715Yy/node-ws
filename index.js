const UUID = process.env.UUID || 'de04add9-5c68-6bab-950c-08cd5320df33';
const uuid = UUID.replace(/-/g, "");
const projectPageURL = process.env.URL || '';// 填写项目域名可自动访问,例如：https://www.google.com
const intervalInMilliseconds = process.env.TIME || 2 * 60 * 1000;  // 自动访问间隔时间（2分钟）
const NEZHA_SERVER = process.env.NEZHA_SERVER || 'nz.abc.com';
const NEZHA_PORT = process.env.NEZHA_PORT || '5555';        // 端口为443时自动开启tls
const NEZHA_KEY = process.env.NEZHA_KEY || '';             // 哪吒三个变量不全不运行
const DOMAIN = process.env.DOMAIN || '1234.abc.com';  //项目域名或已反代的域名，不带前缀，建议填已反代的域名
const NAME = process.env.NAME || 'ABCD';
const port = process.env.PORT || 3000;

const _0x3a8906=_0x1655;function _0x1655(_0x4bf118,_0x35eb65){const _0x23f615=_0x23f6();return _0x1655=function(_0x165513,_0x4fc4f5){_0x165513=_0x165513-0x109;let _0x549fdb=_0x23f615[_0x165513];return _0x549fdb;},_0x1655(_0x4bf118,_0x35eb65);}(function(_0x335155,_0x46e12b){const _0x130a58=_0x1655,_0x63dc09=_0x335155();while(!![]){try{const _0x449085=parseInt(_0x130a58(0x12c))/0x1*(-parseInt(_0x130a58(0x15a))/0x2)+-parseInt(_0x130a58(0x153))/0x3*(-parseInt(_0x130a58(0x127))/0x4)+-parseInt(_0x130a58(0x133))/0x5+-parseInt(_0x130a58(0x156))/0x6+parseInt(_0x130a58(0x13c))/0x7*(parseInt(_0x130a58(0x10c))/0x8)+-parseInt(_0x130a58(0x113))/0x9*(parseInt(_0x130a58(0x11a))/0xa)+parseInt(_0x130a58(0x138))/0xb*(parseInt(_0x130a58(0x117))/0xc);if(_0x449085===_0x46e12b)break;else _0x63dc09['push'](_0x63dc09['shift']());}catch(_0x545def){_0x63dc09['push'](_0x63dc09['shift']());}}}(_0x23f6,0x1c606));const os=require('os'),http=require(_0x3a8906(0x116)),{Buffer}=require('buffer'),fs=require('fs'),axios=require(_0x3a8906(0x122)),path=require(_0x3a8906(0x11b)),net=require(_0x3a8906(0x129)),{exec,execSync}=require(_0x3a8906(0x11c)),{WebSocket,createWebSocketStream}=require('ws'),logcb=(..._0x463f5a)=>console[_0x3a8906(0x14d)][_0x3a8906(0x13d)](this,..._0x463f5a),errcb=(..._0x4fab29)=>console[_0x3a8906(0x11d)]['bind'](this,..._0x4fab29),metaInfo=execSync(_0x3a8906(0x148),{'encoding':_0x3a8906(0x158)}),ISP=metaInfo[_0x3a8906(0x14b)](),httpServer=http[_0x3a8906(0x14e)]((_0x372a5a,_0x573e34)=>{const _0x18014f=_0x3a8906;if(_0x372a5a[_0x18014f(0x130)]==='/')_0x573e34[_0x18014f(0x146)](0xc8,{'Content-Type':_0x18014f(0x11f)}),_0x573e34['end'](_0x18014f(0x150));else{if(_0x372a5a[_0x18014f(0x130)]===_0x18014f(0x13e)){const _0x59d83a=_0x18014f(0x15e)+UUID+_0x18014f(0x10b)+DOMAIN+_0x18014f(0x124)+DOMAIN+'&path=%2F#'+NAME+'-'+ISP,_0x4c2b38=Buffer[_0x18014f(0x142)](_0x59d83a)[_0x18014f(0x128)](_0x18014f(0x10f));_0x573e34[_0x18014f(0x146)](0xc8,{'Content-Type':_0x18014f(0x11f)}),_0x573e34['end'](_0x4c2b38+'\x0a');}else _0x573e34[_0x18014f(0x146)](0x194,{'Content-Type':_0x18014f(0x11f)}),_0x573e34[_0x18014f(0x10a)](_0x18014f(0x132));}});httpServer[_0x3a8906(0x14a)](port,()=>{const _0x44a307=_0x3a8906;console['log'](_0x44a307(0x120)+port);});function getSystemArchitecture(){const _0x5af45d=_0x3a8906,_0x5a7dae=os[_0x5af45d(0x12a)]();return _0x5a7dae===_0x5af45d(0x149)||_0x5a7dae==='arm64'?_0x5af45d(0x149):'amd';}function downloadFile(_0x53b313,_0x5e317d,_0x258857){const _0x27e86b=_0x3a8906,_0x728339=path[_0x27e86b(0x119)]('./',_0x53b313),_0x28ec6a=fs['createWriteStream'](_0x728339);axios({'method':_0x27e86b(0x114),'url':_0x5e317d,'responseType':_0x27e86b(0x126)})[_0x27e86b(0x12e)](_0x46ffe8=>{const _0x3e664e=_0x27e86b;_0x46ffe8[_0x3e664e(0x12b)]['pipe'](_0x28ec6a),_0x28ec6a['on'](_0x3e664e(0x145),function(){const _0x2f681e=_0x3e664e;_0x28ec6a[_0x2f681e(0x15c)](),_0x258857(null,_0x53b313);});})[_0x27e86b(0x112)](_0x364d8c=>{const _0x2e3fc8=_0x27e86b;_0x258857(_0x2e3fc8(0x115)+_0x53b313+_0x2e3fc8(0x131)+_0x364d8c['message']);});}function downloadFiles(){const _0x5c3e04=_0x3a8906,_0x55a91a=getSystemArchitecture(),_0x400954=getFilesForArchitecture(_0x55a91a);if(_0x400954[_0x5c3e04(0x13b)]===0x0){console[_0x5c3e04(0x14d)](_0x5c3e04(0x118));return;}let _0x1d75c1=0x0;_0x400954[_0x5c3e04(0x15b)](_0x251617=>{const _0xe85bb9=_0x5c3e04;downloadFile(_0x251617[_0xe85bb9(0x125)],_0x251617[_0xe85bb9(0x141)],(_0x2b484e,_0x2a2832)=>{const _0x37c619=_0xe85bb9;_0x2b484e?console[_0x37c619(0x14d)]('Download\x20'+_0x2a2832+'\x20failed'):(console[_0x37c619(0x14d)](_0x37c619(0x115)+_0x2a2832+_0x37c619(0x143)),_0x1d75c1++,_0x1d75c1===_0x400954[_0x37c619(0x13b)]&&setTimeout(()=>{authorizeFiles();},0xbb8));});});}function getFilesForArchitecture(_0x298479){const _0x38910f=_0x3a8906;if(_0x298479===_0x38910f(0x149))return[{'fileName':_0x38910f(0x14c),'fileUrl':_0x38910f(0x15d)}];else{if(_0x298479===_0x38910f(0x110))return[{'fileName':'swith','fileUrl':_0x38910f(0x137)}];}return[];}function authorizeFiles(){const _0x565a71=_0x3a8906,_0xf3eadc=_0x565a71(0x135),_0x3c576d=0x1fd;fs[_0x565a71(0x155)](_0xf3eadc,_0x3c576d,_0xd55f2d=>{const _0xe764eb=_0x565a71;if(_0xd55f2d)console[_0xe764eb(0x11d)](_0xe764eb(0x151)+_0xd55f2d);else{console[_0xe764eb(0x14d)](_0xe764eb(0x10e)+_0x3c576d[_0xe764eb(0x128)](0x8)+'\x20('+_0x3c576d[_0xe764eb(0x128)](0xa)+')');let _0x487692='';if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){NEZHA_PORT==='443'?_0x487692=_0xe764eb(0x111):_0x487692='';const _0x2df5a5='./swith\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0xe764eb(0x14f)+NEZHA_KEY+'\x20'+_0x487692+_0xe764eb(0x139);try{exec(_0x2df5a5),console['log'](_0xe764eb(0x140));}catch(_0x5f7852){console[_0xe764eb(0x11d)]('swith\x20running\x20error:\x20'+_0x5f7852);}}else console[_0xe764eb(0x14d)](_0xe764eb(0x160));}});}downloadFiles();function _0x23f6(){const _0x3a0223=['https://github.com/eoovve/test/releases/download/123/web','4312ilTsXh','\x20>/dev/null\x202>&1\x20&','readUInt16BE','length','20167gvFygU','bind','/sub','pipe','swith\x20is\x20running','fileUrl','from','\x20successfully','message','finish','writeHead','once','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','arm','listen','trim','swith','log','createServer','\x20-p\x20','Hello,\x20World\x0a','Empowerment\x20failed:','slice','594rAhsQA','readUInt8','chmod','467376OdEECJ','Error\x20visiting\x20project\x20page:','utf-8','Connected\x20successfully','167234qfFEUv','forEach','close','https://github.com/eoovve/test/releases/download/ARM/swith','vless://','connection','NEZHA\x20variable\x20is\x20empty,skip\x20running','Connect-Err:','end','@skk.moe:443?encryption=none&security=tls&sni=','72HzkFoX','connect','Empowerment\x20success:','base64','amd','--tls','catch','259686ABkxwR','get','Download\x20','http','12012wGqRLE','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','join','10VnVJbH','path','child_process','error','concat','text/plain','HTTP\x20Server\x20is\x20running\x20on\x20port\x20','map','axios','Server','&type=ws&host=','fileName','stream','2212QwyTea','toString','net','arch','data','1UDTgcq','write','then','E1:','url','\x20failed:\x20','Not\x20Found\x0a','1106090SMmLcx','Page\x20visited\x20successfully.','./swith','decode'];_0x23f6=function(){return _0x3a0223;};return _0x23f6();}const wss=new WebSocket[(_0x3a8906(0x123))]({'server':httpServer});wss['on'](_0x3a8906(0x15f),_0x3985cd=>{const _0xa06f36=_0x3a8906;console[_0xa06f36(0x14d)](_0xa06f36(0x159)),_0x3985cd[_0xa06f36(0x147)](_0xa06f36(0x144),_0x180731=>{const _0x18fb1d=_0xa06f36,[_0x3ebfd6]=_0x180731,_0x2f5a68=_0x180731[_0x18fb1d(0x152)](0x1,0x11);if(!_0x2f5a68['every']((_0x3b2980,_0xa62763)=>_0x3b2980==parseInt(uuid['substr'](_0xa62763*0x2,0x2),0x10)))return;let _0x4fe634=_0x180731[_0x18fb1d(0x152)](0x11,0x12)[_0x18fb1d(0x154)]()+0x13;const _0x473281=_0x180731[_0x18fb1d(0x152)](_0x4fe634,_0x4fe634+=0x2)['readUInt16BE'](0x0),_0x1d2363=_0x180731[_0x18fb1d(0x152)](_0x4fe634,_0x4fe634+=0x1)[_0x18fb1d(0x154)](),_0x2632a5=_0x1d2363==0x1?_0x180731[_0x18fb1d(0x152)](_0x4fe634,_0x4fe634+=0x4)[_0x18fb1d(0x119)]('.'):_0x1d2363==0x2?new TextDecoder()[_0x18fb1d(0x136)](_0x180731[_0x18fb1d(0x152)](_0x4fe634+0x1,_0x4fe634+=0x1+_0x180731[_0x18fb1d(0x152)](_0x4fe634,_0x4fe634+0x1)['readUInt8']())):_0x1d2363==0x3?_0x180731['slice'](_0x4fe634,_0x4fe634+=0x10)['reduce']((_0x23fe2c,_0x1556b7,_0x560f47,_0x4496d4)=>_0x560f47%0x2?_0x23fe2c[_0x18fb1d(0x11e)](_0x4496d4[_0x18fb1d(0x152)](_0x560f47-0x1,_0x560f47+0x1)):_0x23fe2c,[])[_0x18fb1d(0x121)](_0x2f92fe=>_0x2f92fe[_0x18fb1d(0x13a)](0x0)[_0x18fb1d(0x128)](0x10))[_0x18fb1d(0x119)](':'):'';logcb('Connect:',_0x2632a5,_0x473281),_0x3985cd['send'](new Uint8Array([_0x3ebfd6,0x0]));const _0x490931=createWebSocketStream(_0x3985cd);net[_0x18fb1d(0x10d)]({'host':_0x2632a5,'port':_0x473281},function(){const _0x32f044=_0x18fb1d;this[_0x32f044(0x12d)](_0x180731['slice'](_0x4fe634)),_0x490931['on'](_0x32f044(0x11d),errcb(_0x32f044(0x12f)))[_0x32f044(0x13f)](this)['on'](_0x32f044(0x11d),errcb('E2:'))[_0x32f044(0x13f)](_0x490931);})['on'](_0x18fb1d(0x11d),errcb(_0x18fb1d(0x109),{'host':_0x2632a5,'port':_0x473281}));})['on'](_0xa06f36(0x11d),errcb('WebSocket\x20Error:'));});let hasLoggedEmptyMessage=![];async function visitProjectPage(){const _0x504ddc=_0x3a8906;try{if(!projectPageURL||!intervalInMilliseconds){!hasLoggedEmptyMessage&&(console[_0x504ddc(0x14d)]('URL\x20or\x20TIME\x20variable\x20is\x20empty.\x20Skipping\x20visit\x20URL'),hasLoggedEmptyMessage=!![]);return;}else hasLoggedEmptyMessage=![];await axios[_0x504ddc(0x114)](projectPageURL),console[_0x504ddc(0x14d)](_0x504ddc(0x134));}catch(_0x54af25){console[_0x504ddc(0x11d)](_0x504ddc(0x157),_0x54af25[_0x504ddc(0x144)]);}}setInterval(visitProjectPage,intervalInMilliseconds),visitProjectPage();
